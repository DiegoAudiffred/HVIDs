{% extends 'layout/layout.html' %}
{% load static %}

{% block body %}
<div class="container">
    <div class="row">
            <div class="">
                <h1>Sección de administrador </h1>
            </div>
            <div class="col-2 text-center">
                <button href="" class="btn border border-3 border-tercero px-4 py-2 text-center text-primary fw-bold" id="tags">Add tags</a>

            </div>
            <div class="col-2 text-center">
                <button href="" class="btn border border-3 border-tercero px-4 py-2 text-center text-primary fw-bold" id="artists">Add artistas</a>

            </div>
            <div class="col-2 text-center">
                <button href="" class="btn border border-3 border-tercero px-4 py-2 text-center text-primary fw-bold" id="chars">Add chars</a>

            </div>
            <div class="col-2 text-center">
                <button href="" class="btn border border-3 border-tercero px-4 py-2 text-center text-primary fw-bold" id="users">Add usuario</a>
            
            </div>
            <div class="col-2 text-center">
                <button href="" class="btn border border-3 border-tercero px-4 py-2 text-center text-primary fw-bold" id="games">Add game</a>
            
            </div>
    </div>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="hidden" name="form_type" value="tag_form">
        <div class="row d-none my-5 justify-content-center" id="tagForm">    
            <div class="my-3">
                <h1 MY>Agregar una nueva Etiqueta/Tag</h1>
            </div>      
            <div class="col-3 mx-3">
                {{ formTag.name }}
            </div>                                  
            <div class="col-3 mx-3">
                <button type="submit" class="btn border border-3 border-primary fw-bold px-3">Agregar Tag</button>
            </div>                
        </div>
    </form>  
    
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="hidden" name="form_type" value="artist_form">
        <div class="row d-none my-5 justify-content-center" id="artistForm">           
            <div class="my-3">
                <h1>Agregar un nuevo Artista</h1>
            </div>  
            <div class="col-3 mx-3">
                <label for="imageInput2" style="cursor: pointer;">
                    <img src="{% static 'img/noImage.jpg' %}" alt="Previsualización" class="img-thumbnail d-block imagePreview" style="max-width: 300px;" data-preview-id="2">
                  </label>
                  <input type="file" name="image2" id="imageInput2" accept="image/*" class="d-none imageInput" data-preview-id="2">
            </div>                
            <div class="col-3 mx-3">
                <div class="my-2">
                    {{ formArtist.name }}
                </div>
                <div class="my-2">
                    <button type="submit" class="btn border border-3 border-primary fw-bold px-3">Agregar Artista</button>
                </div>
            </div>
            
                       
        </div>
    </form> 
    
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="hidden" name="form_type" value="char_form">
        <div class="row d-none my-5 justify-content-center" id="charForm">
            <div class="my-3">
                <h1>Agregar un nuevo Personaje</h1>
            </div>  
            <div class="col-3 mx-3">
              
                <label for="imageInput1" style="cursor: pointer;">
                    <img src="{% static 'img/noImage.jpg' %}" alt="Previsualización" class="img-thumbnail d-block imagePreview" style="max-width: 300px;" data-preview-id="1">
                  </label>
                  <input type="file" name="image" id="imageInput1" accept="image/*" class="d-none imageInput" data-preview-id="1">
                  
                
            </div>    
    
            <div class="col-3 mx-3">
                <div class="my-2">
                    {{ formChar.name }}

                </div>
                <div class="my-2">
                    {{ formChar.game }}

                </div>
                <div class="my-2">
                    <button type="submit" class="btn border border-3 border-primary fw-bold px-3">Agregar Personaje</button>

                </div>
            </div>
          
        </div>
    </form> 
    
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="hidden" name="form_type" value="user_form">
        <div class="row d-none my-5 justify-content-center" id="userForm">
            <div class="my-3">
                <h1>Agregar un nuevo Usuario</h1>
            </div>  
            <div class="col-3 mx-3">
                {{ formUser.username }}
            </div>
            <div class="col-3 mx-3">
                {{ formUser.password }}
            </div>
            <div class="col-3 mx-3">
                <button type="submit" class="btn border border-3 border-primary fw-bold px-3">Agregar Usuario</button>
            </div> 
        </div>
    </form>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="hidden" name="form_type" value="game_form">
        <div class="row d-none my-5 justify-content-center" id="gameForm">
            <div class="my-3">
                <h1>Agregar un nuevo Juego</h1>
            </div>  
            <div class="col-3 mx-3">
                {{ formGame.name }}
            </div>
        
            <div class="col-3 mx-3">
                <button type="submit" class="btn border border-3 border-primary fw-bold px-3">Agregar Juego</button>
            </div> 
        </div>
    </form>
    
    
</div>



<script>
document.addEventListener('DOMContentLoaded', () => {
  const imageInputs = document.querySelectorAll('.imageInput');

  imageInputs.forEach(input => {
    input.addEventListener('change', function () {
      const previewId = this.dataset.previewId;
      const imagePreview = document.querySelector(`.imagePreview[data-preview-id="${previewId}"]`);
      const file = this.files[0];

      if (file && imagePreview) {
        const reader = new FileReader();

        reader.onload = function (e) {
          imagePreview.src = e.target.result;
          imagePreview.classList.remove('d-none');
        };

        reader.readAsDataURL(file);
      } else if (imagePreview) {
        imagePreview.src = "#";
        imagePreview.classList.add('d-none');
      }
    });
  });
});



document.getElementById('tags').onclick = function() {
    toggleFormVisibility('#tagForm');
};

document.getElementById('artists').onclick = function() {
    toggleFormVisibility('#artistForm');
};

document.getElementById('users').onclick = function() {
    toggleFormVisibility('#userForm');
};

document.getElementById('chars').onclick = function() {
    toggleFormVisibility('#charForm');
};

document.getElementById('games').onclick = function() {
    toggleFormVisibility('#gameForm');
};

function toggleFormVisibility(formId) {
    const forms = ['#tagForm', '#artistForm', '#charForm', '#userForm','#gameForm'];
    forms.forEach(function(form) {
        const formElement = document.querySelector(form);
        if (formElement && form !== formId) {
            formElement.classList.add('d-none');
        }
    });
    const selectedForm = document.querySelector(formId);
    if (selectedForm.classList.contains('d-none')) {
        selectedForm.classList.remove('d-none');
    } else {
        selectedForm.classList.add('d-none');
    }
}
</script>
{% endblock %}
