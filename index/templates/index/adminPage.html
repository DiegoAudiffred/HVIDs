{% extends 'layout/layout.html' %}
{% load static %}
{% block body %}
<div class="container">
    <div class="row">
            <div class="">
                <h1>Sección de administrador </h1>
            </div>
            <div class="col-3 text-center">
                <button href="" class="btn border border-3 border-tercero px-4 py-2 text-center text-primary fw-bold" id="tags">Add tags</a>

            </div>
            <div class="col-3 text-center">
                <button href="" class="btn border border-3 border-tercero px-4 py-2 text-center text-primary fw-bold" id="artists">Add artistas</a>

            </div>
            <div class="col-3 text-center">
                <button href="" class="btn border border-3 border-tercero px-4 py-2 text-center text-primary fw-bold" id="chars">Add chars</a>

            </div>
            <div class="col-3 text-center">
                <button href="" class="btn border border-3 border-tercero px-4 py-2 text-center text-primary fw-bold" id="users">Add usuario</a>
            </div>
    </div>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="hidden" name="form_type" value="tag_form">
        <div class="row d-none my-5" id="tagForm">          
            <div class="col-4">
                {{ formTag.name }}
            </div>                                  
            <div class="col-4">
                <button type="submit" class="btn">Agregar Tag</button>
            </div>                
        </div>
    </form>  
    
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="hidden" name="form_type" value="artist_form">
        <div class="row d-none my-5" id="artistForm">           
            <div class="col-4">
                <input class="" type="file" name="image" id="imageInput" accept="image/*">
                <img id="imagePreview" src="{% static '/img/noImage.jpg' %}" alt="Previsualización" class="img-thumbnail d-none" style="max-width: 300px;">                                       
            </div>                
            <div class="col-4">
                {{ formArtist.name }}
            </div>
            <div class="col-4">
                <button type="submit" class="btn">Agregar Artista</button>
            </div>              
        </div>
    </form> 
    
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="hidden" name="form_type" value="char_form">
        <div class="row d-none my-5" id="charForm">
            <div class="col-4">
                <input class="" type="file" name="image" id="imageInput" accept="image/*">
                <img id="imagePreview" src="{% static '/img/noImage.jpg' %}" alt="Previsualización" class="img-thumbnail d-none" style="max-width: 300px;">                      
            </div>    
            <div class="col-4">
                {{ formChar.name }}
            </div>
            <div class="col-4">
                <button type="submit" class="btn">Agregar Personaje</button>
            </div>
        </div>
    </form> 
    
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="hidden" name="form_type" value="user_form">
        <div class="row d-none my-5" id="userForm">
            <div class="col-4">
                {{ formUser.username }}
            </div>
            <div class="col-4">
                <button type="submit" class="btn">Agregar Usuario</button>
            </div> 
        </div>
    </form>  
    
</div>



<script>
document.addEventListener('DOMContentLoaded', () => {
    const imageInput = document.getElementById('imageInput');
    const imagePreview = document.getElementById('imagePreview');

    imageInput.addEventListener('change', function () {
      const file = this.files[0];

      if (file) {
        const reader = new FileReader();

        reader.onload = function (e) {
          imagePreview.src = e.target.result;
          imagePreview.classList.remove('d-none');
        };

        reader.readAsDataURL(file);
      } else {
        imagePreview.src = "#";
        imagePreview.classList.add('d-none');
      }
    });
  });


document.getElementById('tags').onclick = function() {
    toggleFormVisibility('#tagForm');
};

document.getElementById('artists').onclick = function() {
    toggleFormVisibility('#artistForm');
};

document.getElementById('users').onclick = function() {
    toggleFormVisibility('#userForm');
};

document.getElementById('chars').onclick = function() {
    toggleFormVisibility('#charForm');
};

function toggleFormVisibility(formId) {
    const forms = ['#tagForm', '#artistForm', '#charForm', '#userForm'];
    forms.forEach(function(form) {
        const formElement = document.querySelector(form);
        if (formElement && form !== formId) {
            formElement.classList.add('d-none');
        }
    });
    const selectedForm = document.querySelector(formId);
    if (selectedForm.classList.contains('d-none')) {
        selectedForm.classList.remove('d-none');
    } else {
        selectedForm.classList.add('d-none');
    }
}
</script>
{% endblock %}
