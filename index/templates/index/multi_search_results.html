{% extends 'layout/layout.html' %}
{% load static %}

{% block body %}
<h2>Resultados para: "{{ search_terms }}"</h2>

<div class="row ">
    {% if not results%}

    <h1>Nada que mostrar</h1>
    {% endif %}
    {% for mediafile in media_files %}
    <div class="col-md-4 my-2">
        <div class="card h-100">

            {% if mediafile.tipo_objeto == 'comic' %}
                <a href="{% url 'index:watchComic' mediafile.id %}">
            {% else %}
                <a href="{% url 'index:watchContent' mediafile.id %}">
            {% endif %}

            {% if mediafile.image %}
                <div class="position-relative">
                    <img src="{{ mediafile.image.url }}" alt="{{ mediafile.name }} Thumbnail"
                        class="card-img-top blurred" style="height: 200px; object-fit: cover;">
                    <svg class="overlay-svg" ...> ... </svg>
                </div>
            {% else %}
                <div class="position-relative">
                    <img src="{% static 'img/noImage.jpg' %}" alt="Sin imagen"
                        class="card-img-top blurred" style="height: 200px; object-fit: cover;">
                    <svg class="overlay-svg" ...> ... </svg>
                </div>
            {% endif %}
            </a>

            <div class="card-body d-flex flex-column">
                <h5 class="card-title">{{ mediafile.name }}</h5>
                <p class="card-text"><strong>Tipo:</strong> 
                    {% if mediafile.tipo_objeto == 'mediafile' %}
                        {% if mediafile.file %} Video {% else %} Imagen {% endif %}
                    {% else %}
                        CÃ³mic
                    {% endif %}
                </p>
                <p class="card-text"><strong>Artista:</strong> {{ mediafile.artist }}</p>
                <p class="card-text"><strong>Serie:</strong> {{ mediafile.game }}</p>
                <p class="card-text"><strong>Etiquetas:</strong>
                    {% for tag in mediafile.tags.all %}
                        <span class="badge bg-secondary">{{ tag.name }}</span>
                    {% endfor %}
                </p>
            </div>

            {% if mediafile.tipo_objeto == 'mediafile' and mediafile.file %}
            <div class="card-footer text-center">
                <a href="{{ mediafile.file.url }}" class="btn btn-primary text-white" target="_blank">Descargar</a>
            </div>
            {% endif %}
        </div>
    </div>
{% endfor %}
</div>

{% endblock %}
